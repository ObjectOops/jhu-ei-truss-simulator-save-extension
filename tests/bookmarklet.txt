javascript:var%20errorMsg%3D(a%3D%3E%7Bvar%20c%3Blet%20b%3D%60%24%7Ba%7D%60%3BerrorCodeLookup.hasOwnProperty(b)%26%26(c%3DerrorCodeLookup%5Bb%5D)%3Breturn%20%60code%20%24%7Bb%7D%20%24%7Bc!%3D%3Dundefined%3Fc%3A%60%60%7D%60%7D)%3Bvar%20getRemoteStr%3D((a%2Cb)%3D%3E%7Blet%20c%3DremoteUrlForm.value%2B%20(remoteUrlForm.value.endsWith(%60%2F%60)%3F%60%60%3A%60%2F%60)%3Blet%20d%3D%60%24%7BencodeURIComponent(a)%7D%3Ftoken%3D%24%7BencodeURIComponent(remoteAuthForm.value)%7D%26name%3D%24%7BencodeURIComponent(b)%7D%60%3Breturn%20encodeURI(c%2B%20d)%7D)%3Bvar%20extensionLoad%3D(()%3D%3E%7BtrussName%3Dprompt(%60Truss%20Name%60)%3Bfetch(getRemoteStr(remoteLoadEndpointForm.value%2CtrussName)%2C%7Bmethod%3A%60GET%60%7D).then(a%3D%3E%7Bif(!a.ok)throw%20new%20Error(errorMsg(a.status))%3Breturn%20a.blob()%7D).then(a%3D%3E%7Blet%20b%3Dnew%20File(%5Ba%5D%2C%60truss.json%60)%3Blet%20c%3Dnew%20DataTransfer()%3Bc.items.add(b)%3BloadDataElem.files%3Dc.files%3Bwindow.readFile()%3BstatusIndicator.textContent%3D%60save%20status%3A%20LOADED%20%24%7BunsavedStatusText%7D%60%7D).catch(a%3D%3E%7BstatusIndicator.textContent%3D%60load%20status%3A%20%24%7Ba%7D%60%7D)%7D)%3Bvar%20internalButton%3D((a%2Cb)%3D%3E%60%3Ca%20onclick%3D%22%24%7Bb.name%7D()%3B%22%3E%3Ci%20style%3D%22font-size%3A%2013px%3B%20margin-bottom%3A%200px%22%3E%24%7Ba%7D%3C%2Fi%3E%60)%3Bvar%20extensionUpload%3D(()%3D%3E%7Bwindow.writeFile()%3BglobalThis.save_data%3DdecodeURIComponent(saveDataElem.href.replace(%60data%3Atext%2Fjson%3Bcharset%3Dutf-8%2C%60%2C%60%60))%3BstatusIndicator.textContent%3D%60saving...%60%3Bfetch(getRemoteStr(remoteUploadEndpointForm.value%2CsaveDataNameForm.value.length%3D%3D%3D0%3F%60truss%60%3AsaveDataNameForm.value)%2C%7Bmethod%3A%60POST%60%2Cheaders%3A%7B%22Content-Type%22%3A%60application%2Fjson%60%7D%2Cbody%3AglobalThis.save_data%7D).then(a%3D%3E%7Bif(!a.ok)throw%20new%20Error(errorMsg(a.status))%7D).then(()%3D%3E%7BstatusIndicator.textContent%3D%60save%20status%3A%20%24%7BsavedStatusText%7D%60%7D).catch(a%3D%3E%7BstatusIndicator.textContent%3D%60save%20status%3A%20%24%7Ba%7D%60%7D)%3BsetTimeout(()%3D%3E%7BstatusIndicator.textContent%3D%60save%20status%3A%20%24%7BnoneStatusText%7D%60%7D%2C5000)%7D)%3Bconst%20savedStatusText%3D%60saved%60%3Bconst%20unsavedStatusText%3D%60unsaved%60%3Bconst%20noneStatusText%3D%60-%60%3Bconst%20errorCodeLookup%3D%7B%22404%22%3A%60Could%20not%20locate%20file.%20Try%20checking%20the%20server%20address%20or%20file%20name.%60%2C%22403%22%3A%60Access%20denied.%20Try%20checking%20the%20token.%60%2C%22500%22%3A%60Internal%20server%20error.%20See%20server%20logs.%60%7D%3Bconst%20no_content_length%3D230%3Blet%20remoteUrlForm%3DObject.assign(document.createElement(%60input%60)%2C%7Btype%3A%60text%60%2Cplaceholder%3A%60enter%20server%20address...%60%7D)%3Blet%20remoteAuthForm%3DObject.assign(document.createElement(%60input%60)%2C%7Btype%3A%60text%60%2Cplaceholder%3A%60token%20(optional)...%60%7D)%3Blet%20remoteUploadEndpointForm%3DObject.assign(document.createElement(%60input%60)%2C%7Btype%3A%60text%60%2Cplaceholder%3A%60upload%20endpoint%20(optional)...%60%7D)%3Blet%20remoteLoadEndpointForm%3DObject.assign(document.createElement(%60input%60)%2C%7Btype%3A%60text%60%2Cplaceholder%3A%60load%20endpoint%20(optional)...%60%7D)%3Blet%20statusIndicator%3DObject.assign(document.createElement(%60span%60)%2C%7BtextContent%3A%60save%20status%3A%20%24%7BunsavedStatusText%7D%60%7D)%3Blet%20saveDataElem%3Ddocument.getElementById(%60IDelemSaveTruss%60)%3Blet%20saveDataNameForm%3Ddocument.getElementById(%60IDelemFileName%60)%3Blet%20loadDataElem%3Ddocument.getElementById(%60IDelemLoadTruss%60)%3B(()%3D%3E%7Bif(window.location.href!%3D%3D%60https%3A%2F%2Fei.jhu.edu%2Ftruss-simulator%2F%60)%7Blet%20a%3Dprompt(%60This%20page%20may%20not%20be%20the%20truss%20simulator.%20Continue%20Y%2FN%3F%60).toLowerCase()%3Bif(a%3D%3D%3D%60n%60%7C%7Ca%3D%3D%3D%60no%60)return%20undefined%7D%3Bif(globalThis.loadOnce!%3D%3Dundefined)return%20alert(%60Already%20loaded.%60)%2Cundefined%3BglobalThis.loadOnce%3D!0%3Blet%20a%3Ddocument.body%3Blet%20b%3Ddocument.getElementById(%60IDelemSaveSubmenu%60)%3Blet%20c%3Ddocument.getElementById(%60IDelemSaveAs%60)%3Blet%20d%3Ddocument.createElement(%60button%60)%3Bd.innerHTML%3DinternalButton(%60upload%20to%20server%60%2CextensionUpload)%3Blet%20e%3Ddocument.createElement(%60button%60)%3Be.innerHTML%3DinternalButton(%60load%20from%20server%60%2CextensionLoad)%3Ba.prepend(document.createElement(%60br%60))%3Ba.prepend(statusIndicator)%3Bb.appendChild(remoteUrlForm)%3Bb.appendChild(remoteAuthForm)%3Bb.appendChild(remoteUploadEndpointForm)%3Bb.appendChild(remoteLoadEndpointForm)%3Bb.appendChild(e)%3Bc.appendChild(d)%3Bwindow.addEventListener(%60beforeunload%60%2Ca%3D%3E%7Bwindow.writeFile()%3Blet%20b%3DdecodeURIComponent(saveDataElem.href.replace(%60data%3Atext%2Fjson%3Bcharset%3Dutf-8%2C%60%2C%60%60))%3Bif(b.length!%3D%3Dno_content_length%26%26b!%3D%3DglobalThis.save_data)return%20a.preventDefault()%2C%60Unsaved%20changes.%20Confirm%20exit%3F%60%3Breturn%20%60%60%7D)%7D)()
